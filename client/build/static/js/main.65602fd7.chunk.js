(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){e.exports=a(53)},47:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),s=a.n(l),c=(a(47),a(16)),i=a(11),o=a(17),u=a(18),m=a(10),h=a(20),p=a(8),f=a(3),d=a(4),E=a(91),v=a(87),b=a(88),g=a(78),w=a(89),y=a(79),O=a(55),j=a(81),k=a(85),S=a(84),D=a(82),I=a(83),N=a(80),T=a(35),x=a.n(T),R=a(36),W=a.n(R),q=a(34),P=a.n(q);function C(e){return r.a.createElement(g.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}var M="http://localhost:8000/api",A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={timesheet:[]},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.refreshTimesheet()}},{key:"refreshTimesheet",value:function(){var e=this;fetch(M+"/timesheet").then(function(e){return e.json()}).then(function(t){1===t.result&&e.setState({timesheet:t.rows})})}},{key:"sendDeleteRequest",value:function(e){var t=this;fetch(M+"/timesheet/"+e,{method:"delete"}).then(function(e){return e.json()}).then(function(e){1===e.result&&t.refreshTimesheet()})}},{key:"tableClick",value:function(e,t,a){}},{key:"render",value:function(){var e=this;this.props.refresh&&this.refreshTimesheet();var t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{container:!0,spacing:3,justify:"space-between",alignItems:"center"},r.a.createElement(y.a,{item:!0},r.a.createElement(C,null," Timesheet ")),r.a.createElement(y.a,{item:!0},r.a.createElement(N.a,{color:"primary",className:t.button,"aria-label":"delete"},r.a.createElement(P.a,null)))),r.a.createElement(j.a,{size:"medium",onClick:this.tableClick},r.a.createElement(D.a,null,r.a.createElement(I.a,null,r.a.createElement(S.a,null,"Date"),r.a.createElement(S.a,null,"Start Time"),r.a.createElement(S.a,null,"End Time"),r.a.createElement(S.a,null,"Duration"),r.a.createElement(S.a,null,"Rating"),r.a.createElement(S.a,null,"Task(s)"),r.a.createElement(S.a,{align:"right"}))),r.a.createElement(k.a,null,this.state.timesheet.map(function(a){var n=new Date(a.start),l=function(e,t){var a=t-e,n=Math.floor(a/36e5%60),r=Math.floor(a/6e4%60);return n?n+" hours and "+r+" minutes":r+" minutes"}(n,new Date(a.end));return r.a.createElement(I.a,{key:a.rowid},r.a.createElement(S.a,null,n.toLocaleDateString()),r.a.createElement(S.a,null,n.toLocaleTimeString()),r.a.createElement(S.a,null,n.toLocaleTimeString()),r.a.createElement(S.a,null,l),r.a.createElement(S.a,null,2),r.a.createElement(S.a,null,"worc_lock"),r.a.createElement(S.a,{align:"right"},r.a.createElement(N.a,{color:"primary",className:t.button,"aria-label":"delete"},r.a.createElement(x.a,null)),r.a.createElement(N.a,{color:"secondary",className:t.button,"aria-label":"delete",onClick:function(){return e.sendDeleteRequest(a.rowid)}},r.a.createElement(W.a,null))))}))))}}]),t}(n.Component),B=a(86),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={state:"IDLE",start:new Date,duration:0},a.sendStartRequest=a.sendStartRequest.bind(Object(m.a)(a)),a.sendEndRequest=a.sendEndRequest.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.watchState()}},{key:"componentWillUnmount",value:function(){this.stopStopwatch(),clearInterval(this.stateInterval)}},{key:"watchState",value:function(){var e=this;this.stateInterval=setInterval(function(){fetch("http://localhost:8000/api/timer").then(function(e){return e.json()}).then(function(t){switch(t.state){case"IDLE":e.stopStopwatch(),e.setState({state:t.state});break;case"WORKING":var a=new Date(t.start);e.state.start!==a&&(e.setState({state:t.state,start:a}),e.startStopwatch());break;default:console.log(t)}})},1e3)}},{key:"sendStartRequest",value:function(){this.setState({state:"WORKING",start:new Date}),fetch("http://localhost:8000/api/timer?action=START",{method:"PUT"}).then(function(e){return e.json()}).then(function(e){return console.log(e)})}},{key:"sendEndRequest",value:function(){var e=this;this.setState({state:"IDLE"}),fetch("http://localhost:8000/api/timer?action=END",{method:"PUT"}).then(function(e){return e.json()}).then(function(t){e.props.refreshApp()})}},{key:"startStopwatch",value:function(){var e=this;clearInterval(this.stopwatchInterval),this.stopwatchInterval=setInterval(function(){var t=new Date-e.state.start;e.setState({duration:t})},100)}},{key:"stopStopwatch",value:function(){clearInterval(this.stopwatchInterval)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{component:"h1",variant:"h1",color:"primary",align:"center"},function(e){var t=Math.floor(e/36e5%60),a=Math.floor(e/6e4%60),n=Math.floor(e/1e3%60);return(t=t<10?"0"+t:t)+":"+(a=a<10?"0"+a:a)+":"+(n=n<10?"0"+n:n)}(this.state.duration)),r.a.createElement(y.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(y.a,{item:!0,xs:6,sm:4,md:2,lg:2},r.a.createElement(B.a,{onClick:this.sendStartRequest,disabled:"WORKING"===this.state.state,variant:"outlined",color:"primary",fullWidth:!0},"Start Working")),r.a.createElement(y.a,{item:!0,xs:6,sm:4,md:2,lg:2},r.a.createElement(B.a,{onClick:this.sendEndRequest,disabled:"IDLE"===this.state.state,variant:"outlined",color:"secondary",fullWidth:!0},"End Session"))))}}]),t}(n.Component);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var K="http://localhost:8000/api",F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).refresh=!1,a.state={timerState:"hey :)",startTime:new Date,timesheet:[]},a.refreshApp=a.refreshApp.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return fetch(K+"/timer").then(function(e){return e.json()}).then(function(t){t.state!==e.state.timerState&&e.setState({timerState:t.state})})},1e3),fetch(K+"/timesheet").then(function(e){return e.json()}).then(function(t){1===t.result&&e.setState({timesheet:t.rows})})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"refreshApp",value:function(){this.refresh=!0,this.forceUpdate(),this.refresh=!1}},{key:"render",value:function(){var e=this.state.timerState,t=this.props.classes,a=Object(f.a)(t.paper,t.fixedHeight);return r.a.createElement("div",{className:t.root},r.a.createElement(E.a,null),r.a.createElement(v.a,{className:t.appBar},r.a.createElement(b.a,{className:t.toolbar},r.a.createElement(g.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"ADD ME ON LINKEDIN"))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(w.a,{maxWidth:"lg",className:t.container},r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{item:!0,xs:12},r.a.createElement(O.a,{className:t.paper},r.a.createElement(L,{refreshApp:this.refreshApp}))),r.a.createElement(y.a,{item:!0,xs:12,md:8,lg:9},r.a.createElement(O.a,{className:a},r.a.createElement("span",null," ",e," "))),r.a.createElement(y.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(O.a,{className:a},r.a.createElement("span",null," ",e," "))),r.a.createElement(y.a,{item:!0,xs:12},r.a.createElement(O.a,{className:t.paper},r.a.createElement(A,{data:this.state.timesheet,classes:t,refresh:this.refresh})))))))}}]),t}(n.Component),H=Object(d.a)(function(e){return{root:{display:"flex"},appBar:{},toolbar:{},title:{flexGrow:1},content:{flexGrow:1,height:"100vh",overflow:"auto"},appBarSpacer:U({},e.mixins.toolbar),container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},button:{margin:e.spacing(1)},icon:{margin:e.spacing(2)}}},{withTheme:!0})(F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,1,2]]]);
//# sourceMappingURL=main.65602fd7.chunk.js.map