(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{58:function(e,t,a){e.exports=a(69)},63:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),l=(a(63),a(16)),o=a(14),c=a(18),u=a(19),h=a(24),d=a(13),m=a(3),p=a(4),f=a(123),g=a(117),v=a(118),E=a(107),b=a(119),w=a(112),k=a(70),O=a(8),y=a(113),j=a(115),R=a(111),S=a(114),C=a(110),D=a(109),T=a(51),I=a.n(T);function N(e){return r.a.createElement(E.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}var x=a(124),M=a(120),q=a(50),U=a.n(q),W=a(48),P=a.n(W),B=a(47),H=a.n(B),F=a(49),V=a.n(F),L=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).ratingSelected=function(e){a.setState({rating:e.target.value})},a.taskOnChange=function(e){a.setState({tasks:e.target.value})};var n=new Date(a.props.row.start),r=new Date(a.props.row.start),s=new Date(a.props.row.end);return a.state={editing:a.props.editing,valid:{date:!0,start:!0,end:!0},date:n,start:r,end:s,rating:a.props.row.rating,tasks:a.props.row.tasks},a.startEditing=a.startEditing.bind(Object(O.a)(a)),a.stopEditing=a.stopEditing.bind(Object(O.a)(a)),a.dateOnChange=a.dateOnChange.bind(Object(O.a)(a)),a.startOnChange=a.startOnChange.bind(Object(O.a)(a)),a.endOnChange=a.endOnChange.bind(Object(O.a)(a)),a.updateRow=a.updateRow.bind(Object(O.a)(a)),a.deleteRow=a.deleteRow.bind(Object(O.a)(a)),a.ratingSelected=a.ratingSelected.bind(Object(O.a)(a)),a.taskOnChange=a.taskOnChange.bind(Object(O.a)(a)),a.checkValidation=a.checkValidation.bind(Object(O.a)(a)),a.createTableRow=a.createTableRow.bind(Object(O.a)(a)),a.createEditableTableRow=a.createEditableTableRow.bind(Object(O.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"startEditing",value:function(){this.setState({editing:!0})}},{key:"stopEditing",value:function(){this.setState({editing:!1})}},{key:"updateRow",value:function(){var e=this.props.row.rowid,t=this.state,a=t.start,n=t.end,r=t.rating,s=t.tasks;this.checkValidation()&&(this.props.update(e,a.getTime(),n.getTime(),r,s),this.stopEditing())}},{key:"checkValidation",value:function(){var e=this.state.valid;return e.date&e.start&e.end}},{key:"deleteRow",value:function(){this.props.delete(this.props.row.rowid)}},{key:"ratingItems",value:function(){return["",10,9,8,7,6,5,4,3,2,1].map(function(e){return e?r.a.createElement(x.a,{key:e,value:e},e):r.a.createElement(x.a,{key:0,value:""},"")})}},{key:"dateOnChange",value:function(e){var t=e.target.valueAsDate,a=this.state.valid;if(!t)return a.date=!1,void this.setState({valid:a});a.date=!0;var n=this.state,r=n.start,s=n.end,i=r.getHours(),l=r.getMinutes(),o=s.getHours(),c=s.getMinutes(),u=new Date(t.getTime()),h=new Date(t.getTime());u.setHours(i),u.setMinutes(l),h.setHours(o),h.setMinutes(c),this.setState({date:t,start:r,end:s,valid:a})}},{key:"startOnChange",value:function(e){var t=e.target.value,a=this.state.valid;if(!t)return a.start=!1,void this.setState({valid:a});a.start=!0;var n=new Date(this.state.date.getTime());n.setHours(t.slice(0,2)),n.setMinutes(t.slice(3,5));for(var r=this.state.end;r-n<0;)r=new Date(r.getTime()+864e5);for(;r-n>864e5;)r=new Date(r.getTime()-864e5);this.setState({start:n,end:r,valid:a})}},{key:"endOnChange",value:function(e){var t=e.target.value,a=this.state.valid;if(!t)return a.end=!1,void this.setState({valid:a});a.end=!0;var n=new Date(this.state.date.getTime());n.setHours(t.slice(0,2)),n.setMinutes(t.slice(3,5));for(var r=this.state.start;n-r<0;)n=new Date(n.getTime()+864e5);for(;n-r>864e5;)n=new Date(n.getTime()-864e5);this.setState({end:n,valid:a})}},{key:"getDuration",value:function(e,t){var a=t-e,n=Math.floor(a/36e5%60),r=Math.floor(a/6e4%60);return n?n+" hours and "+r+" minutes":r+" minutes"}},{key:"formatTimeInput",value:function(e){var t=e.getHours(),a=e.getMinutes();return(t=t<10?"0"+t:t)+":"+(a=a<10?"0"+a:a)}},{key:"formatTime",value:function(e){var t=e.getHours(),a=e.getMinutes();return a=a<10?"0"+a:a,t>12?(t=(t%=12)<10?"0"+t:t)+":"+a+" PM":t+":"+a+" AM"}},{key:"actionButtons",value:function(e,t){return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{color:"primary",className:t.button,"aria-label":"delete",onClick:this.updateRow},r.a.createElement(H.a,null)),r.a.createElement(D.a,{color:"secondary",className:t.button,"aria-label":"delete",onClick:this.deleteRow},r.a.createElement(P.a,null)),r.a.createElement(D.a,{color:"default",className:t.button,"aria-label":"delete",onClick:this.stopEditing},r.a.createElement(V.a,null))):r.a.createElement(D.a,{color:"primary",className:t.button,"aria-label":"delete",onClick:this.startEditing},r.a.createElement(U.a,null))}},{key:"createTableRow",value:function(e,t,a,n,s,i,l){var o=this.getDuration(a,n),c=this.formatTime(a),u=this.formatTime(n);return r.a.createElement(C.a,{key:e},r.a.createElement(R.a,null,t.toLocaleDateString()),r.a.createElement(R.a,null,c),r.a.createElement(R.a,null,u),r.a.createElement(R.a,null,o),r.a.createElement(R.a,null,s),r.a.createElement(R.a,null,i),r.a.createElement(R.a,{align:"right"},this.actionButtons(!1,this.props.classes)))}},{key:"createEditableTableRow",value:function(e,t,a,n,s,i,l){var o=this.getDuration(a,n),c=this.formatTimeInput(a),u=this.formatTimeInput(n);return r.a.createElement(C.a,{key:e},r.a.createElement(R.a,null,r.a.createElement(M.a,{id:"date",type:"date",defaultValue:a.toJSON().slice(0,10),onChange:this.dateOnChange,className:l.textField})),r.a.createElement(R.a,null,r.a.createElement(M.a,{id:"start",type:"time",defaultValue:c,onChange:this.startOnChange,className:l.textField,inputProps:{step:60}})),r.a.createElement(R.a,null,r.a.createElement(M.a,{id:"time",type:"time",defaultValue:u,onChange:this.endOnChange,className:l.textField,inputProps:{step:60}})),r.a.createElement(R.a,null,r.a.createElement(M.a,{disabled:!0,id:"standard-disabled",value:o,className:l.textField,margin:"normal"})),r.a.createElement(R.a,null,r.a.createElement(M.a,{id:"standard-number",type:"number",value:this.state.rating,onChange:this.ratingSelected,className:l.textField,margin:"normal",autoWidth:!0,select:!0},this.ratingItems())),r.a.createElement(R.a,null,r.a.createElement(M.a,{id:"row-tasks",className:l.textField,placeholder:"task1, task2, task3",defaultValue:this.state.tasks,onChange:this.taskOnChange,margin:"normal"})),r.a.createElement(R.a,{align:"right"},this.actionButtons(this.state.editing,this.props.classes)))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.editing,r=a.date,s=a.start,i=a.end,l=a.rating,o=a.tasks,c=this.props.row.rowid;return n?e.createEditableTableRow(c,r,s,i,l,o,t):e.createTableRow(c,r,s,i,l,o,t)}}]),t}(n.Component),G="http://localhost:8000/api",A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={timesheet:[]},a.sendDeleteRequest=a.sendDeleteRequest.bind(Object(O.a)(a)),a.sendUpdateRequest=a.sendUpdateRequest.bind(Object(O.a)(a)),a.sendCreateRequest=a.sendCreateRequest.bind(Object(O.a)(a)),a.refreshTimesheet=a.refreshTimesheet.bind(Object(O.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.refreshInterval=setInterval(this.refreshTimesheet,500),this.refreshTimesheet()}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval)}},{key:"refreshTimesheet",value:function(){var e=this;fetch(G+"/timesheet").then(function(e){return e.json()}).then(function(t){1===t.result&&e.setState({timesheet:t.rows})})}},{key:"sendUpdateRequest",value:function(e,t,a,n,r){var s=this;console.log(t,a),t&&a?fetch(G+"/timesheet/"+e+"?start="+encodeURIComponent(t)+"&end="+encodeURIComponent(a)+"&rating="+encodeURIComponent(n)+"&tasks="+encodeURIComponent(r),{method:"post"}).then(function(e){return e.json()}).then(function(e){1===e.result&&s.refreshTimesheet()}):console.log("invalid!")}},{key:"sendDeleteRequest",value:function(e){var t=this;fetch(G+"/timesheet/"+e,{method:"delete"}).then(function(e){return e.json()}).then(function(e){1===e.result&&t.refreshTimesheet()})}},{key:"sendCreateRequest",value:function(){var e=this,t=new Date,a=new Date;fetch(G+"/timesheet?start="+encodeURIComponent(t)+"&end="+encodeURIComponent(a)+"&rating="+encodeURIComponent("")+"&tasks="+encodeURIComponent(""),{method:"post"}).then(function(e){return e.json()}).then(function(t){1===t.result&&e.refreshTimesheet()})}},{key:"refresh",value:function(){this.setState({refresh:!this.state.refresh})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{container:!0,spacing:3,justify:"space-between",alignItems:"center"},r.a.createElement(w.a,{item:!0},r.a.createElement(N,null," Timesheet "))),r.a.createElement(y.a,{size:"large",onClick:this.tableClick},r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement(R.a,null,"Date"),r.a.createElement(R.a,null,"Start Time"),r.a.createElement(R.a,null,"End Time"),r.a.createElement(R.a,null,"Duration"),r.a.createElement(R.a,null,"Rating"),r.a.createElement(R.a,null,"Task(s)"),r.a.createElement(R.a,{align:"right"},r.a.createElement(D.a,{color:"primary",className:t.button,"aria-label":"delete",onClick:this.sendCreateRequest},r.a.createElement(I.a,null))))),r.a.createElement(j.a,null,this.state.timesheet.map(function(a){return r.a.createElement(L,{key:a.rowid,row:a,classes:t,delete:e.sendDeleteRequest,update:e.sendUpdateRequest})}))))}}]),t}(n.Component),K=a(116),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={state:"IDLE",start:new Date,duration:0},a.sendStartRequest=a.sendStartRequest.bind(Object(O.a)(a)),a.sendEndRequest=a.sendEndRequest.bind(Object(O.a)(a)),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.watchState()}},{key:"componentWillUnmount",value:function(){this.stopStopwatch(),clearInterval(this.stateInterval)}},{key:"watchState",value:function(){var e=this;this.stateInterval=setInterval(function(){fetch("http://localhost:8000/api/timer").then(function(e){return e.json()}).then(function(t){switch(t.state){case"IDLE":e.stopStopwatch(),e.setState({state:t.state});break;case"WORKING":var a=new Date(t.start);e.state.start!==a&&(e.setState({state:t.state,start:a}),e.startStopwatch());break;default:console.log(t)}})},1e3)}},{key:"sendStartRequest",value:function(){this.setState({state:"WORKING",start:new Date}),fetch("http://localhost:8000/api/timer?action=START",{method:"PUT"}).then(function(e){return e.json()}).then(function(e){return console.log(e)})}},{key:"sendEndRequest",value:function(){this.setState({state:"IDLE"}),fetch("http://localhost:8000/api/timer?action=END",{method:"PUT"}).then(function(e){return e.json()}).then(function(e){})}},{key:"startStopwatch",value:function(){var e=this;clearInterval(this.stopwatchInterval),this.stopwatchInterval=setInterval(function(){var t=new Date-e.state.start;e.setState({duration:t})},100)}},{key:"stopStopwatch",value:function(){clearInterval(this.stopwatchInterval)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"h1",variant:"h1",color:"primary",align:"center"},function(e){var t=Math.floor(e/36e5%60),a=Math.floor(e/6e4%60),n=Math.floor(e/1e3%60);return(t=t<10?"0"+t:t)+":"+(a=a<10?"0"+a:a)+":"+(n=n<10?"0"+n:n)}(this.state.duration)),r.a.createElement(w.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(w.a,{item:!0,xs:6,sm:4,md:2,lg:2},r.a.createElement(K.a,{onClick:this.sendStartRequest,disabled:"WORKING"===this.state.state,variant:"outlined",color:"primary",fullWidth:!0},"Start Working")),r.a.createElement(w.a,{item:!0,xs:6,sm:4,md:2,lg:2},r.a.createElement(K.a,{onClick:this.sendEndRequest,disabled:"IDLE"===this.state.state,variant:"outlined",color:"secondary",fullWidth:!0},"End Session"))))}}]),t}(n.Component);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={timerState:"hey :)",startTime:new Date},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return fetch("http://localhost:8000/api/timer").then(function(e){return e.json()}).then(function(t){t.state!==e.state.timerState&&e.setState({timerState:t.state})})},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state.timerState,t=this.props.classes,a=Object(m.a)(t.paper,t.fixedHeight);return r.a.createElement("div",{className:t.root},r.a.createElement(f.a,null),r.a.createElement(g.a,{className:t.appBar},r.a.createElement(v.a,{className:t.toolbar},r.a.createElement(E.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"ADD ME ON LINKEDIN"))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(b.a,{maxWidth:"lg",className:t.container},r.a.createElement(w.a,{container:!0,spacing:3},r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(k.a,{className:t.paper},r.a.createElement(J,null))),r.a.createElement(w.a,{item:!0,xs:12,md:8,lg:9},r.a.createElement(k.a,{className:a},r.a.createElement("span",null," ",e," "))),r.a.createElement(w.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(k.a,{className:a},r.a.createElement("span",null," ",e," "))),r.a.createElement(w.a,{item:!0,xs:12},r.a.createElement(k.a,{className:t.paper},r.a.createElement(A,{classes:t})))))))}}]),t}(n.Component),X=Object(p.a)(function(e){return{root:{display:"flex"},appBar:{},toolbar:{},title:{flexGrow:1},content:{flexGrow:1,height:"100vh",overflow:"auto"},appBarSpacer:$({},e.mixins.toolbar),container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},button:{},icon:{margin:e.spacing(2)},textField:{},MuiSelect:{select:{padding:void 0,paddingRight:4*e.spacing.unit,height:void 0},selectMenu:{lineHeight:void 0}}}},{withTheme:!0})(Q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[58,1,2]]]);
//# sourceMappingURL=main.30cc1de5.chunk.js.map